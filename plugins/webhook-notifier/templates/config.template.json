{
  "_comment": "Webhook Notifier 配置模板",
  "_usage": "将此文件复制到 ~/.claude/webhook-notifier/config.json 并修改配置",
  "_docs": "使用 /webhook-config 命令行工具进行配置更简单",

  "webhook_url": "https://your-webhook-endpoint.com/notify",
  "_webhook_url_comment": "必需：你的 Webhook 接收端点 URL",

  "enabled": true,
  "_enabled_comment": "是否启用通知，设为 false 可临时禁用",

  "enable_notification_hook": true,
  "_enable_notification_hook_comment": "是否启用 Notification 事件通知（Claude 等待输入时），设为 false 只在会话结束时通知",

  "include_notification_context": true,
  "_include_notification_context_comment": "Notification 通知是否包含对话上下文（Claude 最后一条消息和问题类型），设为 false 只发送基本通知",

  "notification_context_length": 200,
  "_notification_context_length_comment": "提取的上下文消息最大字符数，默认 200（可选，范围：50-500）",

  "timeout": 10,
  "_timeout_comment": "HTTP 请求超时时间（秒），范围：1-300",

  "log_level": "info",
  "_log_level_comment": "日志级别：debug | info | warn | error",

  "payload_config": {
    "_comment": "控制发送到 webhook 的数据内容",

    "include_session_id": true,
    "_include_session_id_comment": "包含会话 ID，用于关联多个通知",

    "include_reason": true,
    "_include_reason_comment": "包含会话结束原因（user/idle/error）",

    "include_transcript_path": true,
    "_include_transcript_path_comment": "包含会话记录文件路径",

    "include_project_info": true,
    "_include_project_info_comment": "包含项目信息（路径、Git 状态等）",

    "include_git_info": true,
    "_include_git_info_comment": "包含 Git 信息（分支、提交等）",

    "custom_fields": {
      "_comment": "自定义字段，将原样添加到 payload 中",
      "_example_team": "your-team-name",
      "_example_environment": "development"
    }
  },

  "_payload_examples": {
    "_comment": "实际发送的 payload 示例",

    "notification_with_context": {
      "event": "notification",
      "notification_type": "waiting_for_input",
      "message": "Claude is waiting for your input",
      "context": {
        "last_message": "我建议使用 React + TypeScript。您同意这个方案吗?",
        "message_type": "confirmation"
      },
      "timestamp": "2025-10-30T15:30:00Z",
      "session": {
        "id": "abc123"
      },
      "project": {
        "directory": "/path/to/project",
        "git_branch": "main",
        "git_repo": "https://github.com/user/repo.git",
        "git_commit": "abc123def"
      }
    },

    "notification_fallback": {
      "_comment": "当无法提取上下文或配置禁用时的降级格式",
      "event": "notification",
      "notification_type": "waiting_for_input",
      "message": "Claude is waiting for your input",
      "timestamp": "2025-10-30T15:30:00Z",
      "session": {
        "id": "abc123"
      },
      "project": {
        "directory": "/path/to/project",
        "git_branch": "main",
        "git_repo": "https://github.com/user/repo.git",
        "git_commit": "abc123def"
      }
    },

    "session_end_event": {
      "event": "session_end",
      "timestamp": "2025-10-30T15:30:00Z",
      "session": {
        "id": "abc123",
        "reason": "user",
        "transcript_path": "/path/to/transcript.txt"
      },
      "project": {
        "directory": "/path/to/project",
        "git_branch": "main",
        "git_repo": "https://github.com/user/repo.git",
        "git_commit": "abc123def"
      }
    }
  }
}
